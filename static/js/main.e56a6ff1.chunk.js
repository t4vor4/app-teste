(this["webpackJsonpmeu-teste"]=this["webpackJsonpmeu-teste"]||[]).push([[0],{20:function(a,e,t){a.exports=t(45)},25:function(a,e,t){},26:function(a,e,t){},45:function(a,e,t){"use strict";t.r(e);var n=t(0),l=t.n(n),r=t(3),o=t.n(r),s=(t(25),t(13)),c=t(14),i=t(18),m=t(15),u=t(1),d=t(19),p=(t(26),t(16)),v=t.n(p),h=t(17),f=t.n(h),g=function(a){return document.querySelector(a)},E=function(a){function e(a){var t;return Object(s.a)(this,e),(t=Object(i.a)(this,Object(m.a)(e).call(this,a))).onChange=function(a){var e=a.target.value;e=(e=e.replace("R$ ","")).replace(",",""),console.log(e.length);var n=e;0===n.length&&(e=""),n.length>0&&(e="R$ ".concat((.01*n).toFixed(2).replace(".",","))),console.log(e),t.setState({value:e})},t.state={infos:{},actualInfo:{},paginaAtual:"inicio",value:"R$ 0,00"},t.currency=t.currency.bind(Object(u.a)(t)),t.barraNav=t.barraNav.bind(Object(u.a)(t)),t.setPagina=t.setPagina.bind(Object(u.a)(t)),t.cbAcumulado=t.cbAcumulado.bind(Object(u.a)(t)),t.useList=t.useList.bind(Object(u.a)(t)),t.setNewUser=t.setNewUser.bind(Object(u.a)(t)),t.consultUser=t.consultUser.bind(Object(u.a)(t)),t.cadastrarCompra=t.cadastrarCompra.bind(Object(u.a)(t)),t.onChange=t.onChange.bind(Object(u.a)(t)),t.conversor=t.conversor.bind(Object(u.a)(t)),t.confirmaCadastro=t.confirmaCadastro.bind(Object(u.a)(t)),t}return Object(d.a)(e,a),Object(c.a)(e,[{key:"componentDidMount",value:function(){var a=this,e=!!localStorage.myDearTest17112019&&localStorage.getItem("myDearTest17112019");console.log(this.state.actualInfo),e?(this.setState({infos:JSON.parse(e)}),console.log(JSON.parse(e))):f.a.get("/objetoteste.json").then((function(a){return a.data})).then((function(e){console.log(e),a.setState({infos:e}),localStorage.setItem("myDearTest17112019",JSON.stringify(a.state.infos))}))}},{key:"conversor",value:function(a){localStorage.setItem("myDearTest17112019",JSON.stringify(a))}},{key:"setNewUser",value:function(){var a=this.state.infos,e={};if(e.email=g("#cadastro-email").value,e.senha=g("#pass2").value,e.cpf=g("#cpf").value,e.compras=[],-1!==e.email.indexOf("@"))if(-1!==e.email.split("@")[1].indexOf("."))if(e.senha.length<4)alert("Sua senha deve ter no m\xednimo 4 characteres");else if(""===e.cpf||e.cpf.indexOf("_")>-1)alert("Por favor, preencha seu CPF corretamente");else{for(var t=0;t<a.length;t++){if(e.email===a[t].email)return void alert("E-mail j\xe1 cadastrado.");if(e.cpf===a[t].cpf)return void alert("CPF j\xe1 cadastrado.")}a.push(e),this.setState({actualInfo:a,paginaAtual:"listagem"}),this.conversor(a)}else alert("E-mail invalido 2");else alert("E-mail invalido")}},{key:"consultUser",value:function(){var a,e=this.state.infos,t={};if(t.email=g("#login-email").value,t.senha=g("#pass").value,console.log(e),-1!==t.email.indexOf("@"))if(-1!==t.email.split("@")[1].indexOf("."))if(""!==t.senha){for(var n=0;n<e.length;n++)t.email===e[n].email&&t.senha===e[n].senha&&(a=1,this.setState({actualInfo:e[n],paginaAtual:"listagem"}));!a&&alert("Usu\xe1rio ou senha n\xe3o encontrado.")}else alert("Senha inv\xe1lida");else alert("E-mail invalido 2");else alert("E-mail invalido")}},{key:"cadastrarCompra",value:function(){var a={},e=this.state.infos,t=this.state.actualInfo,n=this.state.value?this.state.value.replace("R$ ","").replace(",",""):null;if(a.codigo=g("#cadCode").value,a.data=g("#cadData").value.replace(/-/g,"/"),a.codigo)if(n)if(a.data){if(t.compras.length)for(var l=0;l<t.compras.length;l++)if(t.compras[l].codigo===a.codigo)return void alert("Este c\xf3digo j\xe1 existe");if(a.valor=n,a.cbPercent=.05,a.cbValor=Math.floor(.05*n),a.statusCadastro="validacao",t.compras.push(a),e.length)for(var r=0;r<e.length;r++)e[r].cpf===t.cpf&&(e[r]=t);this.conversor(e),alert("Compra cadastrada com sucesso!"),g("#cadValor").value="",g("#cadCode").value="",g("#cadData").value=""}else alert("Escolha uma data v\xe1lida");else alert("Insira um valor de compra");else alert("Insira um c\xf3digo v\xe1lido")}},{key:"cbAcumulado",value:function(){var a=this.state.actualInfo;if(a.compras.length){var e=(.01*a.compras.map((function(a){return"reprovado"!==a.statusCadastro?a.cbValor:0})).reduce((function(a,e){return parseInt(a)+parseInt(e)}))).toString().split(".");return console.log(e),e?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"subtitle"},"Valor total do Cashback acumulado at\xe9 a presente data"),l.a.createElement("div",{className:"text text--big"},l.a.createElement("sup",null,"R$"),e[0],l.a.createElement("small",null,",",e[1]))):l.a.createElement("h3",{className:"subtitle"},"N\xe3o h\xe1 valores dispon\xedveis")}return l.a.createElement("h3",{className:"subtitle"},"N\xe3o h\xe1 valores dispon\xedveis")}},{key:"currency",value:function(a){return"R$ "+(.01*a).toFixed(2).replace(".",",")}},{key:"setPagina",value:function(a){this.setState({paginaAtual:a})}},{key:"barraNav",value:function(){var a=this;return l.a.createElement("div",{className:"nav ".concat(this.state.paginaAtual)},l.a.createElement("button",{"data-page":"listagem",onClick:function(e){return a.setState({paginaAtual:"listagem"})}},"Lista de Compras"),l.a.createElement("button",{"data-page":"cadastroCompras",onClick:function(e){return a.setState({paginaAtual:"cadastroCompras"})}},"Cadastro de Compras"),l.a.createElement("button",{"data-page":"cshAcumulado",onClick:function(e){return a.setState({paginaAtual:"cshAcumulado"})}},"Cashback acumulado"))}},{key:"confirmaCadastro",value:function(a){return"validacao"===a?l.a.createElement("select",{name:"select"},l.a.createElement("option",{value:""},"Valida\xe7\xe3o"),l.a.createElement("option",{value:"aprovado"},"Aprovado"),l.a.createElement("option",{value:"reprovado"},"Reprovado")):"aprovado"===a?"Aprovado":"reprovado"===a?"Reprovado":void 0}},{key:"useList",value:function(){var a=this,e=this.state.infos,t=this.state.actualInfo,n=t.compras?t.compras:null,r=[];if(n.length){for(var o=function(o){var s=n[o];r.push(l.a.createElement("tr",{className:"lista_item ".concat(s.statusCadastro),key:o},l.a.createElement("td",{className:"codigo"},s.codigo),l.a.createElement("td",{className:"valor"},a.currency(s.valor)),l.a.createElement("td",{className:"data"},s.data),l.a.createElement("td",{className:"cbPercent"},s.cbPercent),l.a.createElement("td",{className:"cbValor"},a.currency(s.cbValor)),l.a.createElement("td",{className:"statusCadastro"},"aprovado"===s.statusCadastro?"Aprovado":"reprovado"===s.statusCadastro?"Reprovado":l.a.createElement("select",{name:"select",onChange:function(n){for(var l in t.compras[o].statusCadastro=n.target.value,a.setState({actualInfo:t}),e)e[l].cpf===t.cpf&&(e[l]=t,a.setState({infos:e}),localStorage.setItem("myDearTest17112019",JSON.stringify(a.state.infos)))}},l.a.createElement("option",{value:""},"Valida\xe7\xe3o"),l.a.createElement("option",{value:"aprovado"},"Aprovado"),l.a.createElement("option",{value:"reprovado"},"Reprovado")))))},s=0;s<n.length;s++)o(s);return l.a.createElement("table",{className:"lista"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"lista_item lista_item--topo"},l.a.createElement("th",{className:"codigo"},"C\xf3digo"),l.a.createElement("th",{className:"valor"},"Valor da Compra"),l.a.createElement("th",{className:"data"},"Data"),l.a.createElement("th",{className:"cbPercent"},"% do Cashback"),l.a.createElement("th",{className:"cbValor"},"Valor do Cashback"),l.a.createElement("th",{className:"statusCadastro"},"Status"))),l.a.createElement("tbody",null,r))}return l.a.createElement("h3",{className:"info info--negative"},"'N\xe3o existem compras ainda.'")}},{key:"render",value:function(){var a=this.state.paginaAtual;return l.a.createElement("div",{className:"".concat(this.state.paginaAtual," content")},"inicio"===a&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Ol\xe1, bem vindo ao aplicativo teste"),l.a.createElement("div",{className:"form form_cadastro"},l.a.createElement("h3",null,"Cadastre-se"),l.a.createElement("span",{className:"cont cont--cadastro"},l.a.createElement("label",{htmlFor:"cadastro-email"},"E-mail"),l.a.createElement("input",{type:"email",id:"cadastro-email",pattern:".+@globex.com",size:"30",required:!0})),l.a.createElement("span",{className:"cont cont--senha"},l.a.createElement("label",{htmlFor:"cadastro-senha"},"Senha"),l.a.createElement("input",{type:"password",id:"pass2",name:"password",minLength:"4",required:!0})),l.a.createElement("span",{className:"cont cont--cpf"},l.a.createElement("label",{htmlFor:"cadastro-cpf"},"CPF"),l.a.createElement(v.a,Object.assign({},this.props,{mask:"999.999.999-99",maskChar:"_",id:"cpf"}))),l.a.createElement("button",{className:"cadastro-entrar",onClick:this.setNewUser,value:this.state.value},"Cadastrar")),l.a.createElement("div",{className:"form form_login"},l.a.createElement("h3",null,"J\xe1 sou cadastrado"),l.a.createElement("span",{className:"cont cont--login"},l.a.createElement("label",{htmlFor:"login-email"},"E-mail"),l.a.createElement("input",{type:"email",id:"login-email",pattern:".+@globex.com",size:"30",required:!0})),l.a.createElement("span",{className:"cont cont--senha"},l.a.createElement("label",{htmlFor:"login-senha"},"Senha"),l.a.createElement("input",{type:"password",id:"pass",name:"password",minLength:"4",required:!0})),l.a.createElement("button",{className:"login-entrar",onClick:this.consultUser},"Entrar"))),"listagem"===a&&l.a.createElement(l.a.Fragment,null,this.barraNav(),l.a.createElement("h1",null,"Listagem de compras"),l.a.createElement("div",{className:"cont_table"},this.useList())),"cadastroCompras"===a&&l.a.createElement(l.a.Fragment,null,this.barraNav(),l.a.createElement("h1",null,"Cadastro de Compra"),l.a.createElement("ul",{className:"cadastro"},l.a.createElement("li",{className:"cadastro_item cadastro_item--topo"},l.a.createElement("span",{className:"codigo"},l.a.createElement("label",null,"C\xf3digo"),l.a.createElement("input",{type:"text",id:"cadCode"})),l.a.createElement("span",{className:"valor"},l.a.createElement("label",null,"Valor da Compra"),l.a.createElement("input",{type:"text",id:"cadValor",min:"1",onChange:this.onChange,value:this.state.value})),l.a.createElement("span",{className:"data"},l.a.createElement("label",null,"Data"),l.a.createElement("input",{type:"date",id:"cadData"}))),l.a.createElement("li",{className:"cadastro__button_cont"},l.a.createElement("button",{className:"button_cont__cadastrar",id:"cadastroCompra",onClick:this.cadastrarCompra},"Cadastrar")))),"cshAcumulado"===a&&l.a.createElement(l.a.Fragment,null,this.barraNav(),l.a.createElement("h1",null,"Cashback acumulado"),this.cbAcumulado()))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(a){a.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.e56a6ff1.chunk.js.map